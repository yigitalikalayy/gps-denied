{
  "camera": {
    "backend": "ros1",
    "calibration": {
      "base_dir": ".",
      "cache_file": "",
      "camera_matrix": [
        [
          3358.281617164202,
          0.0,
          320.5
        ],
        [
          0.0,
          3358.281617164202,
          200.5
        ],
        [
          0.0,
          0.0,
          1.0
        ]
      ],
      "dist_coeffs": [
        0.0,
        0.0,
        0.0,
        0.0,
        0.0
      ],
      "enabled": true,
      "mode": "precomputed",
      "prefer_cache": false,
      "rectify_alpha": 0.0,
      "rms": 0.0
    },
    "fps": 120,
    "height": 400,
    "queue_size": 2,
    "roi": null,
    "ros_node_name": "px4flow_rpi_sitl_camera",
    "ros_qos_depth": 5,
    "ros_qos_reliability": "best_effort",
    "ros_spin_timeout_s": 0.02,
    "ros_timeout_s": 1.0,
    "threaded": true,
    "topic": "/camera/image_raw",
    "width": 640
  },
  "flow": {
    "algorithm": "px4flow",
    "axis_mode": "",
    "axis_sign_x": 1.0,
    "axis_sign_y": -1.0,
    "axis_swap_xy": true,
    "bias_alpha": 0.03,
    "bias_flow_thresh_px": 2.5,
    "bias_gyro_thresh_rad_s": 0.05,
    "distance_cap_m": 25.0,
    "essential_confidence": 0.999,
    "essential_ransac_thresh_px": 1.0,
    "fallback_min_response": 0.2,
    "fallback_mode": "phase",
    "fallback_scale": 0.5,
    "feature_border_px": 8,
    "feature_detector": "shi_tomasi",
    "feature_max": 500,
    "feature_min_distance": 4,
    "feature_quality": 0.0003,
    "flow_deadband_px": 0.2,
    "flow_edge_reject_margin_px": 0.25,
    "focal_length_px": 3358.281617164202,
    "fundamental_confidence": 0.99,
    "fundamental_max_iters": 2000,
    "fundamental_ransac_thresh_px": 1.5,
    "gyro_comp_enable": true,
    "gyro_comp_scale": 1.0,
    "gyro_comp_sign_x": 1.0,
    "gyro_comp_sign_y": 1.0,
    "lk_fb_check": true,
    "lk_fb_thresh_px": 2.5,
    "lk_max_level": 3,
    "lk_ransac": true,
    "lk_ransac_confidence": 0.99,
    "lk_ransac_max_iters": 2000,
    "lk_ransac_thresh_px": 3.0,
    "lk_win_size": 21,
    "max_px_per_frame": 60.0,
    "max_vel_m_s": 4.0,
    "min_geom_matches": 8,
    "min_inlier_ratio": 0.15,
    "min_quality": 15,
    "min_tracked_features": 8,
    "optical_flow_pixel_scale": 10.0,
    "outlier_reject_mad": 3.0,
    "preprocess": {
      "clahe_clip": 2.0,
      "clahe_tile": 8,
      "gamma": 1.0,
      "saturation_threshold": 245
    },
    "publish_hz": 50,
    "px4flow_feature_threshold": 40,
    "px4flow_image_size": 64,
    "px4flow_min_count": 10,
    "px4flow_num_blocks": 5,
    "px4flow_search_size": 4,
    "px4flow_tile_size": 8,
    "px4flow_value_threshold": 2000,
    "quality_ema_alpha": 0.0,
    "quality_mad_px": 1.0,
    "quality_max": 255,
    "quality_min": 0,
    "quality_mode": "requested",
    "quality_motion_floor": 0.2,
    "quality_motion_px": 4.0,
    "reseed_every_n_frames": 5,
    "send_hil_optical_flow": false,
    "send_optical_flow": false,
    "send_optical_flow_rad": true,
    "spike_px": 120.0,
    "temporal_window": 7
  },
  "gyro": {
    "axis_sign_x": 1.0,
    "axis_sign_y": 1.0,
    "axis_sign_z": 1.0,
    "axis_swap_xy": false,
    "use_autopilot_imu": true
  },
  "lidar": {
    "backend": "ros1",
    "enabled": true,
    "poll_hz": 50,
    "ros_timeout_s": 1.0,
    "topic": "/distance_sensor"
  },
  "logging": {
    "debug_gating": true,
    "print_hz": 5,
    "print_raw_flow": true
  },
  "serial": {
    "compid": 195,
    "enabled": true,
    "imu_filter": {
      "max_age_s": 0.2,
      "max_jump_rad_s": 20.0,
      "max_rad_s": 50.0,
      "temp_max_c": 150.0,
      "temp_min_c": -50.0
    },
    "imu_source": "attitude",
    "request_imu_stream": {
      "enabled": true,
      "message_ids": [
        30,
        31
      ],
      "method": "auto",
      "rate_hz": 100,
      "stream_id": 0
    },
    "sysid": 42,
    "target_compid": 1,
    "target_sysid": 1,
    "transport": "udp",
    "udp": {
      "bind_host": "0.0.0.0",
      "bind_port": 14030,
      "learn_remote_from_rx": true,
      "remote_host": "127.0.0.1",
      "remote_port": 14280
    },
    "yaw_buffer": {
      "max_samples": 6000
    }
  },
  "time_sync": {
    "bootstrap_frames": 60,
    "bootstrap_timeout_s": 2.0,
    "camera_window_samples": 240,
    "enabled": true,
    "fps_max_hz": 130.0,
    "fps_min_hz": 10.0,
    "health": {
      "ema_alpha": 0.2,
      "max_abs_lag_s": 0.03,
      "max_fps_error_rel": 0.03,
      "max_stale_s": 2.5,
      "min_corr_peak": 0.1,
      "min_good_updates": 5
    },
    "imu_max_age_s": 10.0,
    "imu_window_samples": 2400,
    "init_fps_std_hz": 1.0,
    "init_offset_std_s": 0.01,
    "max_abs_yaw_delta_rad": 0.05,
    "max_lag_s": 0.3,
    "measurement_sigma_s": 0.008,
    "min_angular_rate_rad_s": 0.03,
    "min_corr_peak": 0.05,
    "min_geom_inliers": 8,
    "min_samples": 24,
    "min_signal_std": 3e-05,
    "nominal_fps_source": "runtime",
    "particle_count": 256,
    "process_noise_fps_hz": 0.02,
    "process_noise_offset_s": 0.0005,
    "update_hz": 20.0
  }
}
